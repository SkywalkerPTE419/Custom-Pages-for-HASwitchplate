##############################################################################
# Automations for handling toggle state BUTTONs on page 6
automation:
  #Set font and text for toggle BUTTONs on device connection
  - alias: hasp_plate01_p6_ToggleInit
    trigger:
    - platform: state
      entity_id: 'binary_sensor.plate01_connected'
      to: 'on'
    - platform: homeassistant
      event: start
    - platform: state
      entity_id: input_boolean.hasp_plate01_p6_switchtoggles
      to: 'off'
    #condition:
    #- condition: state
    #  entity_id: input_boolean.hasp_plate01_p6_switchtoggles
    #  state: 'off'

    action:
    #Change payload (BUTTON7) to the name for TOP LEFT toggle
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[10].font'
        payload: '0'
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[10].txt'
        payload: '"BUTTON7"'  
    #Change payload (BUTTON8) to the name for TOP RIGHT toggle
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[11].font'
        payload: '0'
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[11].txt'
        payload: '"BUTTON8"'
    #Change payload (BUTTON9) to the name for MIDDLE LEFT toggle
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[12].font'
        payload: '0'
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[12].txt'
        payload: '"BUTTON9"'
    #Change payload (BUTTON10) to the name for MIDDLE RIGHT toggle
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[13].font'
        payload: '0'
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[13].txt'
        payload: '"BUTTON10"'
    #Change payload (BUTTON11) to the name for BOTTOM LEFT toggle
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[14].font'
        payload: '0'
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[14].txt'
        payload: '"BUTTON11"'
    #Change payload (BUTTON9) to the name for BOTTOM RIGHT toggle
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[15].font'
        payload: '0'
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[15].txt'
        payload: '"BUTTON12"'

# Replace switch.YOUR_ENTITY* with your entities you want to control
  # Toggle BUTTON8 when p[6].b[4] pressed
  - alias: hasp_plate01_p6_Toggle1
    trigger:
    - platform: mqtt
      topic: 'hasp/plate01/state/p[6].b[4]'
      payload: 'ON'
    action:
    - service: homeassistant.toggle
      entity_id: switch.YOUR_ENTITY7
      
  # Toggle BUTTON8 when p[6].b[5] pressed
  - alias: hasp_plate01_p6_Toggle2
    trigger:
    - platform: mqtt
      topic: 'hasp/plate01/state/p[6].b[5]'
      payload: 'ON'
    action:
    - service: homeassistant.toggle
      entity_id: switch.YOUR_ENTITY8

  # Toggle BUTTON9 when p[6].b[6] pressed
  - alias: hasp_plate01_p6_Toggle3
    trigger:
    - platform: mqtt
      topic: 'hasp/plate01/state/p[6].b[6]'
      payload: 'ON'
    action:
    - service: homeassistant.toggle
      entity_id: switch.YOUR_ENTITY9
      
   # Toggle BUTTON10 when p6.b7 pressed
  - alias: hasp_plate01_p6_Toggle4
    trigger:
    - platform: mqtt
      topic: 'hasp/plate01/state/p[6].b[7]'
      payload: 'ON'
    action:
    - service: homeassistant.toggle
      entity_id: switch.YOUR_ENTITY70
      
   # Toggle BUTTON8 when p6.b8
  - alias: hasp_plate01_p6_Toggle5
    trigger:
    - platform: mqtt
      topic: 'hasp/plate01/state/p[6].b[8]'
      payload: 'ON'
    action:
    - service: homeassistant.toggle
      entity_id: switch.YOUR_ENTITY11
    
    # Toggle BUTTON9 p6.b9
  - alias: hasp_plate01_p6_Toggle6
    trigger:
    - platform: mqtt
      topic: 'hasp/plate01/state/p[6].b[9]'
      payload: 'ON'
    action:
    - service: homeassistant.toggle
      entity_id: switch.YOUR_ENTITY12
          
  # Replace YOUR_ENTITY* with the corresponding from above    
  # Toggle colors/icon on p[6].b[4] when BUTTON8 changes
  - alias: hasp_plate01_p2_ToggleColor1
    trigger:
    - platform: state
      entity_id: switch.YOUR_ENTITY7
    - platform: state
      entity_id: 'binary_sensor.plate01_connected'
      to: 'on'
    - platform: homeassistant
      event: start
    - platform: state
      entity_id: input_number.hasp_plate01_selectedbackgroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_unselectedbackgroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_selectedforegroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_unselectedforegroundcolor
    action:
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[10].pco'
        payload_template: >-
          {% if states.switch.YOUR_ENTITY7 == "on" -%}
            {{ states.input_number.hasp_plate01_selectedforegroundcolor.state | int }}
          {%- else -%}
            {{ states.input_number.hasp_plate01_unselectedforegroundcolor.state | int }}
          {%- endif %}
    - service: mqtt.publish
      data_template:
        topic: 'hasp/plate01/command/p[6].b[4].picc'
        payload_template: >-
          {% if states.switch.YOUR_ENTITY7.state == "on" -%}
            {{ 1 }}
          {%- else -%}
            {{ 2 }}
          {%- endif %}

  # Toggle colors on p[6].b[5] when BUTTON8 changes
  - alias: hasp_plate01_p6_ToggleColor2
    trigger:
    - platform: state
      entity_id: switch.YOUR_ENTITY2
    - platform: state
      entity_id: 'binary_sensor.plate01_connected'
      to: 'on'
    - platform: homeassistant
      event: start
    - platform: state
      entity_id: input_number.hasp_plate01_selectedbackgroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_unselectedbackgroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_selectedforegroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_unselectedforegroundcolor
    action:
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[11].pco'
        payload_template: >-
          {% if states.switch.YOUR_ENTITY2.state == "on" -%}
            {{ states.input_number.hasp_plate01_selectedforegroundcolor.state | int }}
          {%- else -%}
            {{ states.input_number.hasp_plate01_unselectedforegroundcolor.state | int }}
          {%- endif %}
    - service: mqtt.publish
      data_template:
        topic: 'hasp/plate01/command/p[6].b[5].picc'
        payload_template: >-
          {% if states.switch.YOUR_ENTITY2.state == "on" -%}
            {{ 1 }}
          {%- else -%}
            {{ 2 }}
          {%- endif %}

  # Toggle colors on p[6].b[6] when BUTTON9 changes
  - alias: hasp_plate01_p6_ToggleColor3
    trigger:
    - platform: state
      entity_id: light.switch.YOUR_ENTITY9
    - platform: state
      entity_id: 'binary_sensor.plate01_connected'
      to: 'on'
    - platform: homeassistant
      event: start
    - platform: state
      entity_id: input_number.hasp_plate01_selectedbackgroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_unselectedbackgroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_selectedforegroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_unselectedforegroundcolor
    action:
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[12].pco'
        payload_template: >-
          {% if states.light.switch.YOUR_ENTITY9.state == "on" -%}
            {{ states.input_number.hasp_plate01_selectedforegroundcolor.state | int }}
          {%- else -%}
            {{ states.input_number.hasp_plate01_unselectedforegroundcolor.state | int }}
          {%- endif %}
    - service: mqtt.publish
      data_template:
        topic: 'hasp/plate01/command/p[6].b[6].picc'
        payload_template: >-
          {% if states.light.switch.YOUR_ENTITY9.state == "on" -%}
            {{ 1 }}
          {%- else -%}
            {{ 2 }}
          {%- endif %}
          
  # Toggle colors on p[6].b[7] when BUTTON10 changes
  - alias: hasp_plate01_p7_ToggleColor3
    trigger:
    - platform: state
      entity_id: switch.YOUR_ENTITY70
    - platform: state
      entity_id: 'binary_sensor.plate01_connected'
      to: 'on'
    - platform: homeassistant
      event: start
    - platform: state
      entity_id: input_number.hasp_plate01_selectedbackgroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_unselectedbackgroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_selectedforegroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_unselectedforegroundcolor
    action:
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[13].pco'
        payload_template: >-
          {% if states.light.switch.YOUR_ENTITY70.state == "on" -%}
            {{ states.input_number.hasp_plate01_selectedforegroundcolor.state | int }}
          {%- else -%}
            {{ states.input_number.hasp_plate01_unselectedforegroundcolor.state | int }}
          {%- endif %}
    - service: mqtt.publish
      data_template:
        topic: 'hasp/plate01/command/p[6].b[7].picc'
        payload_template: >-
          {% if states.light.switch.YOUR_ENTITY70 == "on" -%}
            {{ 1 }}
          {%- else -%}
            {{ 2 }}
          {%- endif %}
   
  # Toggle colors on p[6].b[8] when BUTTON8 changes
  - alias: hasp_plate01_p8_ToggleColor3
    trigger:
    - platform: state
      entity_id: switch.YOUR_ENTITY11
    - platform: state
      entity_id: 'binary_sensor.plate01_connected'
      to: 'on'
    - platform: homeassistant
      event: start
    - platform: state
      entity_id: input_number.hasp_plate01_selectedbackgroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_unselectedbackgroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_selectedforegroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_unselectedforegroundcolor
    action:
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[14].pco'
        payload_template: >-
          {% if states.light.switch.YOUR_ENTITY11.state == "on" -%}
            {{ states.input_number.hasp_plate01_selectedforegroundcolor.state | int }}
          {%- else -%}
            {{ states.input_number.hasp_plate01_unselectedforegroundcolor.state | int }}
          {%- endif %}
    - service: mqtt.publish
      data_template:
        topic: 'hasp/plate01/command/p[6].b[8].picc'
        payload_template: >-
          {% if states.light.switch.YOUR_ENTITY11.state == "on" -%}
            {{ 1 }}
          {%- else -%}
            {{ 2 }}
          {%- endif %}
          
  # Toggle colors on p[6].b[9] when BUTTON9 changes
  - alias: hasp_plate01_p9_ToggleColor3
    trigger:
    - platform: state
      entity_id: switch.YOUR_ENTITY12
    - platform: state
      entity_id: 'binary_sensor.plate01_connected'
      to: 'on'
    - platform: homeassistant
      event: start
    - platform: state
      entity_id: input_number.hasp_plate01_selectedbackgroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_unselectedbackgroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_selectedforegroundcolor
    - platform: state
      entity_id: input_number.hasp_plate01_unselectedforegroundcolor
    action:
    - service: mqtt.publish
      data:
        topic: 'hasp/plate01/command/p[6].b[15].pco'
        payload_template: >-
          {% if states.light.switch.YOUR_ENTITY12.state == "on" -%}
            {{ states.input_number.hasp_plate01_selectedforegroundcolor.state | int }}
          {%- else -%}
            {{ states.input_number.hasp_plate01_unselectedforegroundcolor.state | int }}
          {%- endif %}
    - service: mqtt.publish
      data_template:
        topic: 'hasp/plate01/command/p[6].b[9].picc'
        payload_template: >-
          {% if states.light.switch.YOUR_ENTITY12.state == "on" -%}
            {{ 1 }}
          {%- else -%}
            {{ 2 }}
          {%- endif %}